{% extends "../base.html" %}

{% block title %}
{{ site.name }}
{% end %}

{% block header %}
{% include '../home/header.html' %}
{% end %}

{% block css %}
  <link rel="stylesheet" href="{{ site_base }}/static/js/OwlCarousel2-2.2.1/dist/assets/owl.carousel.min.css">
  <link rel="stylesheet" href="{{ site_base }}/static/js/OwlCarousel2-2.2.1/dist/assets/owl.theme.default.min.css">
{% end %}

{% block javascript %}

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBgxgscsLlZS4fq_oQ_6jVS-CZqRzpDzCU"></script>
<script type="text/javascript" src="{{site_base}}/static/js/map.home.js"></script>
<script src="{{ site_base }}/static/js/OwlCarousel2-2.2.1/dist/owl.carousel.min.js"></script>
<script type="text/javascript">

    //Expresión para validar un correo electrónico
        var expr = /^[a-zA-Z0-9_\.\-]+@[a-zA-Z0-9\-]+\.[a-zA-Z0-9\-\.]+$/;
        //Expresión para validar edad de 18 a 60 años
        var expr2 = /^1[8-9]|[2-5]\d|60$/;
        $(document).ready(function(){
            //función click
            $("#bEnviar").click(function(){

                //Guardar en variables el valor que tengan las cajas de texto
                //Por medio de los id's
                //Y tener mejor manipulación de dichos valores
                var nombre = $("#itNombre").val();
                var correo = $("#itMail").val();
                var asunto = $("#itComentario").val();

                var error_count = 0;
 
                // --- Condicionales anidados ----
                //Si nombre está vacío
                //Muestra el mensaje
                //Con false sale de los if's y espera a que sea pulsado de nuevo el botón de enviar
                if(nombre == ""){
                    $("#itNombre").parents(".form-group").addClass("has-error");
                    $(".help-nombre").removeClass('hidden');
                    error_count += 1;
                }
                //en otro caso, el mensaje no se muestra
                else{
                    $("#itNombre").parents(".form-group").removeClass("has-error");
                    $(".help-nombre").addClass('hidden');
                }

                //Si correo está vacío y la expresión NO corresponde -test es función de JQuery
                //Muestra el mensaje
                //Con false sale de los if's y espera a que sea pulsado de nuevo el botón de enviar
                if(correo == "" || !expr.test(correo)){
                    $("#itMail").parents(".form-group").addClass("has-error");
                    $(".help-mail").removeClass('hidden');
                    error_count += 1;
                }
                else
                {
                    $("#itMail").parents(".form-group").removeClass("has-error");
                    $(".help-mail").addClass('hidden');
                }


                if(asunto == ""){
                    $("#itComentario").parents(".form-group").addClass("has-error");
                    $(".help-comentario").removeClass('hidden');
                    error_count += 1;
                }
                else
                {
                    $("#itComentario").parents(".form-group").removeClass("has-error");
                    $(".help-comentario").addClass('hidden');
                }

                if (error_count > 0)
                {
                    return false;
                }
 
            });//click

            $(document).on("submit", "#newsletter", function(ev){
              ev.preventDefault();

              var message = "Nombre: "+$("#newsletter input[name]").val()+"<br>";
              message += "Apellido: "+ $("#itApellido").val() +"<br>";
              message += "Email: "+ $("#itMail").val() +"<br>";
              message += "Mensaje: "+$("#itComentario").val();

              $.ajax({
                  url: $(this).attr("action"),
                  type: 'post',
                  data: $(this).serialize() + '&ajax=True&message='+message,
                  success: function(data) {
                      console.log(data);
                      if (data === 'ok'){
                        $(".fondo-for").addClass("hidden", {duration:1000,effect:'blind'});
                        $(".fondo-dos").removeClass("hidden", {duration:1000,effect:'blind'});
                        $(".fondo-dos").addClass("visible");
                      }
                  }
              });



            });


        });//ready
</script>

<script type="text/javascript">
  $(document).ready(function()
  {
    var owl = $('.owl-carousel');
    owl.owlCarousel({
      items:1,
      loop:true,
      autoplay:true,
      autoplayTimeout:5000,
      autoplayHoverPause:true
    });
    $('.play').on('click',function()
    {
      owl.trigger('play.owl.autoplay',[5000])
    });
    $('.stop').on('click',function()
    {
      owl.trigger('stop.owl.autoplay')
    });
  });
</script>

{% end %}

{% block body %}

{% if is_admin %}
{% set editabletext = 'editabletext' %}
{% else %}
{% set editabletext = '' %}
{% end %}

<section> 
  <div class="container">
    <div class="owl-carousel" align="center">
      <div class="" style="position:relative;">
        {% if is_admin %}
          <div class="image-upload lapiz visible-movil ban-lapiz">
            <label for="img_met_banner_1">
              <img class="change-image" src="https://7static.loadingplay.com/static/images/ef03c01fe39c6b7d1404e311adfe47ff_btn-edit.png" onmouseover="this.src='https://7static.loadingplay.com/static/images/f2e626ad62e2c957b3708a27e55f4b03_btn-edit-hover.png';" onmouseout="this.src='https://7static.loadingplay.com/static/images/ef03c01fe39c6b7d1404e311adfe47ff_btn-edit.png'">
            </label>
            <input type="file" class="editableimage editar-header" image-id="{{ site.name }}_met_banner_1" name="image" id="img_met_banner_1" >
          </div>
        {% end %}
        <div class="base-logo">
          <img id="{{ site.name }}_met_banner_1" src="{{ read_image(site.name + '_met_banner_1', 1) }}" onload="this.onload='';this.src='{{ read_image(site.name + '_met_banner_1',) }}'" class="banner-one" alt="item">
        </div>
      </div>

      <div class="" style="position:relative;">
        {% if is_admin %}
          <div class="image-upload lapiz visible-movil ban-lapiz">
            <label for="img_met_banner_2">
              <img class="change-image" src="https://7static.loadingplay.com/static/images/ef03c01fe39c6b7d1404e311adfe47ff_btn-edit.png" onmouseover="this.src='https://7static.loadingplay.com/static/images/f2e626ad62e2c957b3708a27e55f4b03_btn-edit-hover.png';" onmouseout="this.src='https://7static.loadingplay.com/static/images/ef03c01fe39c6b7d1404e311adfe47ff_btn-edit.png'">
            </label>
            <input type="file" class="editableimage editar-header" image-id="{{ site.name }}_met_banner_2" name="image" id="img_met_banner_2" >
          </div>
        {% end %}
        <div class="base-logo">
          <img id="{{ site.name }}_met_banner_2" src="{{ read_image(site.name + '_met_banner_2', 1) }}" onload="this.onload='';this.src='{{ read_image(site.name + '_met_banner_2',) }}'" class="banner-one" alt="item">
        </div>
      </div>

      <div class="" style="position:relative;">
        {% if is_admin %}
          <div class="image-upload lapiz visible-movil ban-lapiz">
            <label for="img_met_banner_3">
              <img class="change-image" src="https://7static.loadingplay.com/static/images/ef03c01fe39c6b7d1404e311adfe47ff_btn-edit.png" onmouseover="this.src='https://7static.loadingplay.com/static/images/f2e626ad62e2c957b3708a27e55f4b03_btn-edit-hover.png';" onmouseout="this.src='https://7static.loadingplay.com/static/images/ef03c01fe39c6b7d1404e311adfe47ff_btn-edit.png'">
            </label>
            <input type="file" class="editableimage editar-header" image-id="{{ site.name }}_met_banner_3" name="image" id="img_met_banner_3" >
          </div>
        {% end %}
        <div class="base-logo">
          <img id="{{ site.name }}_met_banner_3" src="{{ read_image(site.name + '_met_banner_3', 1) }}" onload="this.onload='';this.src='{{ read_image(site.name + '_met_banner_3',) }}'" class="banner-one" alt="item">
        </div>
      </div>
    </div>
  </div>
</section>


  

<section>
  <div class="container">
    <div class="col-md-12">
      <div align="center">

       <div class="col-md-4">
        {% if is_admin %}
        <div class="image-upload lapiz visible-movil">
          <label for="img_for">
            <img class="change-image pencil" src="https://7static.loadingplay.com/static/images/ef03c01fe39c6b7d1404e311adfe47ff_btn-edit.png" onmouseover="this.src='https://7static.loadingplay.com/static/images/f2e626ad62e2c957b3708a27e55f4b03_btn-edit-hover.png';" onmouseout="this.src='https://7static.loadingplay.com/static/images/ef03c01fe39c6b7d1404e311adfe47ff_btn-edit.png'">
          </label>
          <input type="file" class="editableimage" image-id="{{ site.name }}_for" name="image" id="img_for" >
        </div>
        {% end %}
        <img id="{{ site.name }}_for" src="{{ read_image(site.name + '_for', 1) }}" onload="this.onload='';this.src='{{ read_image(site.name + '_for',500) }}'" class="img-for" alt="item" />
        
      </div>
      <div class="col-md-8">
     <!--  *Mensaje recibido oculto* -->
        <div class="fondo-dos hidden">
           <div class="col-md-12">
              <div class="texto-edi text-center {{editabletext}}" text-id="{{ site.name + '_p_ja' }}">{{ read_text(site.name +  '_p_ja') }}</div>
          </div>
        </div>
    <!--   *-* -->
       <div class="fondo-for">
        <div class="col-md-6">
          <div class="texto-for text-center"> HABLEMOS!</div>
        </div>
        <div class="col-md-6">
          <div class="texto-for-2 text-center"> TU OPINIÓN NOS IMPORTA</div>
        </div>

        <div align="center">
          <form action="{{ site_base }}/contact" class="contact-add-form"  method="post" novalidate id="newsletter">

            <div class="col-xs-12 col-sm-10">
              <div class="form-group">
                <label class="control-label"></label>
                <div class=" controls">
                  <input name="name" placeholder="NOMBRE" class="form-control input-lg requiredField" type="text" id="itNombre" data-error-invalid="Invalid email address" data-error-empty="Ingrese nombre">
                </div>
                <span id="helpBlock2" class="hidden help-block help-nombre">NOMBRE</span>
              </div>
              <div class="form-group">
                <label class="control-label"></label>
                <div class=" controls">
                  <input name="lastname" placeholder="APELLIDO" class="form-control input-lg requiredField" type="text" id="itApellido" data-error-invalid="Invalid email address" data-error-empty="Ingrese apellido">
                </div>
                <span id="helpBlock22" class="hidden help-block help-nombre">APELLIDO</span>
              </div>
              <div class="form-group">
                <label class="control-label"></label>
                <div class=" controls">
                  <input name="email" placeholder="EMAIL" class="form-control input-lg requiredField" type="email" id="itMail" data-error-invalid="Invalid email address" data-error-empty="Ingrese email">
                  <input type="hidden" name="subject2" value="Nuevo mensaje desde sitio web www.glamcolombia.com" />
                </div>
                <span id="helpBlock3" class="hidden help-block help-mail">EMAIL</span>
              </div>
            </div>  
            <div align="center">
              <div class="form-group">
                <label class="control-label"></label>
                <div class="controls">
                  <textarea name="message" placeholder="COMENTARIO" class="form-control com input-lg requiredField" id="itComentario" rows="5" data-error-empty="Ingrese mensaje"></textarea>
                </div>
                <span id="helpBlock4" class="hidden help-block help-comentario">COMENTARIO</span>
              </div>
              <p><button name="submit" id="bEnviar" type="submit" class="btn btn-store btn-block " data-error-message="Error!" data-sending-message="Sending..." data-ok-message="Email Sent">ENVIAR </button></p>
              <input type="hidden" name="submitted" id="submitted3" value="true">
            </div>
          </form> 
      </div>
    </div>
  </div>

</div>
</div>
</div>
</section>

<!-- ***********MAPA********* -->

<section>

     <div class="container">
       <div class="visit text-center {{editabletext}}" text-id="{{ site.name + '_p_v' }}">{{ read_text(site.name +  '_p_v') }}</div>
       <hr>
       <hr class="der">
       <div align="center">
           <div id="map" style="height: 450px; width:87%;  margin-bottom: 65px;"></div>
       </div>
     </div>
 
</section>


{% include '../home/footer.html' %}
{% end %}
